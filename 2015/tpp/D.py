m = 30000
n = 256
v = 0
a = [0] * m
i = 0
s = input()
#">>>>>>,[>,]<[!0<[<]?[->-(<)]<[<]>>[-<+>]<(0<<+>>)<=>=>>[>]<"
r = "i = 0\n"
t = 0
def prev(i):
    return (i + m - 1) % m
def next(i):
    return (i + 1) % m
d = {
    '>' : 'i = next(i)',
    '<' : 'i = prev(i)',
    '|' : 'i = 0',
    ',' : 'a[i] = int(input()) % n',
    '.' : 'print(a[i])',
    '=' : 'a[i] = a[prev(i)]',
    '0' : 'a[i] = 0',
    '!' : 'v = a[i]',
    '?' : 'a[i] = v % n',
    '*' : 'a[i] = (a[i] * a[prev(i)]) % n',
    '/' : 'a[i] = (a[i] // a[prev(i)]) % n',
    '+' : 'a[i] = (a[i] + 1) % n',
    '-' : 'a[i] = max(a[i] - 1, 0)',
    '[' : 'while a[i] != 0:',
    ']' : '',
    '(' : 'if a[i] != 0:',
    ')' : '',
    '^' : 'print(v)',
    '$' : 'v = i',
    '#' : 'input()'
    }
debug = True
debug = False
for c in s:
    r += ' ' * t + d[c] + '\n'
    if c == '(' or c == '[':
        t += 4
    if c == ')' or c == ']':
        t -= 4
    if debug:
        r += ' ' * t + 'print("' + d[c] + '")\n'
        r += ' ' * t + 'print(" " * i * 2 + "V")\n'
        r += ' ' * t + 'print(" ".join(map(str, a[:15])), str(v))\n'
exec(r)
#readints = ',[>,]<'
#goleft = '[<]>'
#goright = '[>]<'
#pr = '.'
#aplusb = '>[-<+>]<'
#bplusa = '[->+<]'
#aitov = '!'
#vtoai = '?'

#def i(s):
    #return '(' + s + ')'

#def wh(s):
    #return '[' + s + ']'

#print(''.join([
    #'++>+**+****>>+.<<-',
    #wh(''.join([
        #'->>>',
        #aitov,
        #'=<<',
        #vtoai,
        #bplusa,
        #'>.<<'
    #]))
    #]))
#>>>>>>>>,[>,]<[[>>>+<<<-]>[<+>-]<+<]>[<<<<<<<<+>>>>>>>>-]<<<<<<<<[[>>+>+>>+<<<<<-]>>[<<+>>-]<[>+>>+>>+<<<<<-]>[<+>-]>>>>[-<->]+<[>->+<<-[>>-<<[-]]]>[<+>-]>[<<+>>-]<+<[->-<<[-]<[-]<<[-]<[[>+<-]<]>>[>]<+>>>>]>[-<<+[-[>+<-]<-[>+<-]>>>>>>>>[<<<<<<<<+>>>>>>>>-]<<<<<<]<<[>>+<<-]>[>[>+>>+<<<-]>[<+>-]>>>>>>[<+<+>>-]<[>+<-]<<<[>+>[<-]<[<]>>[<<+>[-]+>-]>-<<-]>>[-]+<<<[->>+<<]>>[->-<<<<<[>+<-]<[>+<-]>>>>>>>>[<<<<<<<<+>>>>>>>>-]<<]>[[-]<<<<<<[>>+>>>>>+<<<<<<<-]>>[<<+>>-]>>>>>[-[>>[<<<+>>>-]<[>+<-]<-[>+<-]>]<<[[>>+<<-]<]]>]<<<<<<-]>[>>>>>>+<<<<<<-]<<[[>>>>>>>+<<<<<<<-]>[<+>-]<+<]<[[>>>>>>>>+<<<<<<<<-]>>[<+>-]<+<<]>+>[<-<<[>+<-]<[<]>[[<+>-]>]>>>[<<<<+>>>>-]<<[<+>-]>>]<[-<<+>>]>>>]<<<<<<]>>>>>>>>>>>[.>]
